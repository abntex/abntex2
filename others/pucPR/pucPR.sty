%% Criado por Rogério C. - <rogerioc@cesec.ufpr.br>
%%        Dornelles Vissoto Junior <dvissoto@ufpr.br>
%% modificado por: Renato Machnievscz <renato.m@pucpr.br>
%% This file is distributed under the LaTeX-Project Public License (LPPL)
%%      	http://www.latex-project.org.lppl.html
%% You are free to modify this file under the LPPL.
%%
\NeedsTeXFormat{LaTeX2e}

\ProvidesPackage{pucPR}[2004/08/03]

% ifthen - conditions in LaTeX
\PassOptionsToClass{pnumromarab}{abnt}

\RequirePackage{ifthen}
\RequirePackage[brazil]{babel}
\RequirePackage[latin1]{inputenc}
%\RequirePackage{abnt}

\PassOptionsToPackage{hyperindex=false}{hyperref}

\makeatletter	%Para que ele entenda o @

% ** Altera definições da ABNT para o modelo PPGEM - PUCPR

% ************* CAPA **************
\renewcommand{\capa}{
\begin{titlepage}
\espaco{1.1}

\begin{center}
	\large\ABNTchapterfont\ABNTautordata
\end{center}

\vspace{7.5cm}

\begin{center}
	\Large\ABNTchapterfont\ABNTtitulodata\par
\end{center}

\vfill

\begin{center}
%	\textbf{\ABNTlocaldata}\par
%	\textbf{\ABNTdatadata}
	\ABNTchapterfont{\ABNTlocaldata}\par
	\ABNTchapterfont{\ABNTdatadata}
\end{center}
\end{titlepage}
}% end of \capa

% ******** FOLHA DE ROSTO *********
\newcommand{\esporient}[2]{
	\leftskip 0em
	\@tempdima 5.5em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{#1#2\hfil}}

\newcommand{\espcoorient}[2]{
	\leftskip 0em
	\@tempdima 7em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{#1#2\hfil}}

\renewcommand{\folhaderosto}{
\begin{titlepage}
\espaco{1.1}

\begin{center}
	\large\ABNTchapterfont\ABNTautordata
\end{center}

\vspace{7.5cm}

\begin{center}
	\large\ABNTchapterfont\ABNTtitulodata\par
\end{center}

\vspace{2cm}

\hspace{.35\textwidth}
\begin{minipage}{.5\textwidth}
	\begin{espacosimples}
		\ABNTcomentariodata\par
	\end{espacosimples}
\end{minipage}

\hspace{.35\textwidth}
\begin{minipage}{.55\textwidth}
	\begin{espacosimples}
		\esporient{\numberline {Orientador:}}{\ignorespaces\ABNTorientadordata}
	\end{espacosimples}
\end{minipage}

\ABNTifnotempty{\ABNTcoorientadordata}{
	\hspace{.35\textwidth}
	\begin{minipage}{.55\textwidth}
		\begin{espacosimples}
			\espcoorient{\numberline {Co-Orientador:}}{\ignorespaces\ABNTcoorientadordata}
		\end{espacosimples}
	\end{minipage}}

\vfill

\begin{center}
%	\textbf{\ABNTlocaldata}\par
%	\textbf{\ABNTdatadata}
	\ABNTchapterfont{\ABNTlocaldata}\par
	\ABNTchapterfont{\ABNTdatadata}
\end{center}

\end{titlepage}

}% end of \folhaderosto
%%-------------------------------------------------------------------------
% Altera o tamanho das fontes dos capítulos e dos apêndices
\renewcommand{\ABNTchapterfont}{\bfseries}
%\renewcommand{\ABNTchaptersize}{\Large}
%\renewcommand{\ABNTsectionfont}{\large}
%\renewcommand{\ABNTanapsize}{\Large}

%Altera o espaçamento entre dots
\renewcommand\@dotsep{2}

%Altera forma de montagem do table of contents
\renewcommand\l@chapter[2]{
  \ifnum \c@tocdepth >\m@ne
    \addpenalty{-\@highpenalty}%
    \vskip 1.0em \@plus\p@
    \setlength\@tempdima{1.5em}%
    \begingroup
      \ifthenelse{\boolean{ABNTpagenumstyle}}
        {\renewcommand{\@pnumwidth}{3.5em}}
        {}
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      \leavevmode \normalsize\ABNTtocchapterfont
      \advance\leftskip\@tempdima
      \hskip -\leftskip
      #1\nobreak\dotfill \nobreak%
      \ifthenelse{\boolean{ABNTpagenumstyle}}
         {%
          \hb@xt@\@pnumwidth{\hss 
            \ifthenelse{\not\equal{#2}{}}{{\normalfont p.\thinspace#2}}{}}\par
         }
         {%
          \hb@xt@\@pnumwidth{\hss #2}\par
         }
      \penalty\@highpenalty
    \endgroup
  \fi}

\renewcommand*\l@section{\@dottedtocline{1}{0em}{2.3em}}
\renewcommand*\l@subsection{\@dottedtocline{2}{0em}{3.2em}}
\renewcommand*\l@subsubsection{\@dottedtocline{3}{0em}{4.1em}}

% Cria um comando auxiliar para montagem da lista de figuras
\newcommand{\figfillnum}[1]{%
  {\hspace{1em}\normalfont\dotfill}\nobreak
  \hb@xt@\@pnumwidth{\hfil\normalfont #1}{}\par}

% Cria um comando auxiliar para montagem da lista de tabelas
\newcommand{\tabfillnum}[1]{%
	{\hspace{1em}\normalfont\dotfill}\nobreak
	\hb@xt@\@pnumwidth{\hfil\normalfont #1}{}\par}

% Altera a forma de montagem da lista de figuras
\renewcommand*{\l@figure}[2]{
	\vspace{-0.75cm} %define o espacamento entre as linhas
	\leftskip 3.1em
	\rightskip 1.6em
	\parfillskip -\rightskip
	\parindent 0em
	\@tempdima 2.0em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{Figura \normalfont #1}\nobreak \figfillnum{#2}}

% Altera a forma de montagem de lista de tabelas
\renewcommand*{\l@table}[2]{
	\vspace{-0.75cm} %define o espacamento entre as linhas
	\leftskip 3.4em
	\rightskip 1.6em
	\parfillskip -\rightskip
	\parindent 0em
	\@tempdima 2.0em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{Tabela \normalfont #1}\nobreak \tabfillnum{#2}}

% Define os comandos que montam a lista de símbolos
\newcommand{\listadesimbolos}{\pretextualchapter{Lista de Símbolos}\@starttoc{lsb}}
\newcommand{\simbolo}[2]{{\addcontentsline{lsb}{simbolo}{\numberline{#1}{#2}}}#1}
\newcommand{\l@simbolo}[2]{
	\vspace{-0.75cm}
	\leftskip 0em
	\parindent 0em
	\@tempdima 5em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{\normalfont #1}\hfil\nobreak\par}

% Define o comando que monta a lista de siglas
\newcommand{\listadesiglas}{\pretextualchapter{Lista de Siglas}\@starttoc{lsg}}
\newcommand{\sigla}[2]{{\addcontentsline{lsg}{sigla}{\numberline{#1}{#2}}}#1}
\newcommand{\l@sigla}[2]{
	\vspace{-0.75cm}
	\leftskip 0em
	\parindent 0em
	\@tempdima 5em
	\advance\leftskip \@tempdima \null\nobreak\hskip -\leftskip
	{\normalfont #1}\hfil\nobreak\par}

% Define o tipo de numeração das páginas
\renewcommand{\chaptertitlepagestyle}{plain}

% Altera a posição da numeração de páginas dos elementos pré-textuais
\renewcommand\pretextualchapter{
	\if@openright\cleardoublepage\else\clearpage\fi
	\pagestyle{\chaptertitlepagestyle}
	\global\@topnum\z@
	\@afterindentfalse
	\@schapter}

% Altera a posição da numeração de páginas dos elementos textuais
\renewcommand{\ABNTchaptermark}[1]{
	\ifthenelse{\boolean{ABNTNextOutOfTOC}}
		{\markboth{\ABNTnextmark}{\ABNTnextmark}}
		{\chaptermark{#1}
		\pagestyle{\chaptertitlepagestyle}}}

% Redefine o tipo de numeração das páginas
\renewcommand{\ABNTBeginOfTextualPart}{

% fontstyle for header elements
  \renewcommand{\rightmarkformat}{\small\upshape}
  \renewcommand{\leftmarkformat}{\upshape}
	\renewcommand{\chaptertitlepagestyle}{ruledheader}
	\renewcommand{\thepage}{\arabic{page}}
	\setcounter{page}{1}}

\makeatother

%Altera o tamanho do parágrafo
\setlength{\parindent}{1.5cm}

% ******* TERMO DE APROVAÇÃO ******
\providecommand{\ABNTtextoaprovacaodata}{}
\newcommand{\textoaprovacao}[1]{\renewcommand{\ABNTtextoaprovacaodata}{#1}}

\providecommand{\ABNTprimeiroassinadata}{}
\newcommand{\primeiroassina}[1]{\renewcommand{\ABNTprimeiroassinadata}{#1}}

\providecommand{\ABNTsegundoassinadata}{}
\newcommand{\segundoassina}[1]{\renewcommand{\ABNTsegundoassinadata}{#1}}

\providecommand{\ABNTterceiroassinadata}{}
\newcommand{\terceiroassina}[1]{\renewcommand{\ABNTterceiroassinadata}{#1}}

\providecommand{\ABNTquartoassinadata}{}
\newcommand{\quartoassina}[1]{\renewcommand{\ABNTquartoassinadata}{#1}}

\providecommand{\ABNTlocaldiadata}{}
\newcommand{\localdia}[1]{\renewcommand{\ABNTlocaldiadata}{#1}}

\newcommand{\termodeaprovacao}{
\begin{titlepage}

%\vspace{-1.0cm}

\pretextualchapter{Termo de Aprovação}

\vspace{-0.5cm}

\begin{center}
	\large\ABNTchapterfont\ABNTautordata
\end{center}

%\vspace{0.5cm}

\begin{center}
	\large\ABNTchapterfont\ABNTtitulodata
\end{center}

\vspace{0.5cm}%era0.75

\begin{espacosimples}
	\noindent\ABNTtextoaprovacaodata\par
\end{espacosimples}

\setlength{\ABNTsignthickness}{0.4pt}
\setlength{\ABNTsignskip}{1.75cm}

\vspace{-0.5cm}

\ABNTifnotempty{\ABNTprimeiroassinadata}%
{%
  \begin{center}
    \vspace{-0.5cm}
    \assinatura{\ABNTprimeiroassinadata}
  \end{center}
}
\ABNTifnotempty{\ABNTsegundoassinadata}%
{%
  \begin{center}
    \vspace{-0.5cm}
    \assinatura{\ABNTsegundoassinadata}
  \end{center}
}
\ABNTifnotempty{\ABNTterceiroassinadata}%
{%
  \begin{center}
    \vspace{-0.5cm}
    \assinatura{\ABNTterceiroassinadata}
  \end{center}
}
\ABNTifnotempty{\ABNTquartoassinadata}%
{%
  \begin{center}
    \vspace{-0.5cm}
    \assinatura{\ABNTquartoassinadata}
  \end{center}
}

\vfill

\begin{center}
	\ABNTlocaldiadata
\end{center}

\end{titlepage}
}